<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>

      EPIC integration &middot; Sudhindra Rao

  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/mine.css">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>


<body>

  <div class="sidebar" style="display:none">
  <div class="container">
    <div class="sidebar-about">
      <p>Developer, Coach, Practitioner, Robotics Geek, Cricket Fan in San Francisco</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a href="/">Home</a>
      </li>











            <li class="sidebar-nav-item">
              <a href="/about/">About</a>
            </li>


























































      <li class="sidebar-nav-item"><a href="https://github.com/betarelease">GitHub</a></li>
    </ul>
    <p class="fineprint">&copy; 2009 - . All rights reserved.</p>
    <p class="fineprint">Modified from https://github.com/poole</p>
  </div>
</div>

  <h1 class="post-splash-image"></h1>
  <div class="topbar">
    <span class="menu-trigger"><img class="tiny-avatar" src="/images/me.png">Sudhindra Rao</span>
    <span class="twitter"><a href="http://twitter.com/sudhindraRao"><img src="/images/Twitter_logo_blue.png"></a></span>
  </div>

  <div class="content container">
    <div class="post">
  <h1 class="post-title">EPIC integration</h1>
  <span class="post-date">21 Jan 2016</span>
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="sudhindraRao">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <h2>Glooko - Diabetes Management Platform</h2>

<p>I was very excited to find out about <a href="http://www.glooko.com">Glooko</a> and start working there last year. Glooko has built a unified diabetes management platform, where we enable users to sync data from a variety of blood glucose meters, continuous glucose monitor(CGM) and insulin pumps, as well as popular fitness trackers. Once their data is uploaded, users can review their diabetes data in context with their insulin, food and fitness data, as well as other relevant clinical information to help with manage their blood glucose levels and keep them under control. Glooko platform also enables health care providers(doctors, nurses, caregivers, parents, etc.) to monitor a person with diabetes remotely and provide more timely, collaborative care.</p>

<p>At Glooko, we now have a data platform that is open to integrations. Our preferred way to integrate is via our RESTful APIs using JSON.</p>

<h2>EPIC Integration</h2>

<p>Although Glooko is also available on the web and sends patient data securely via the cloud, a number of our partners/healthcare systems have invested in and are required to use Electronic Health Records(EHR) software in their clinic. And doctors are familiar and comfortable using that technology. In order to integrate with EHR technologies we had to learn about them and build custom integration with them.</p>

<!--more-->

<p>One of the frontrunners in EHR technology is <a href="http://www.epic.com/">EPIC</a>. EPIC EHR is used by a number of clinics and hospitals and provides a single window view into all patients&#39; the data. EPIC also allows for some integration points into their EHR as long as the 3rd party adheres to their strict protocols. Newer versions of EPIC promise better ways for integration but their installations are few and the path to upgrading them is long, which is based on how quickly the health system&#39;s IT organization is able to do the installation.</p>

<p>EPIC 2012 WSDL specification was handed to us to build a WebService that adheres to this WSDL.</p>

<h2>Build Web Services in Ruby</h2>

<p>I had not done anything with WSDLs for a while, let alone building an actual webservice. Doing all of this in Ruby/Rails seemed to be whole other challenge. Thank you to <a href="https://github.com/inossidabile">Boris Staal</a> for building the <a href="https://github.com/inossidabile/wash_out">wash_out gem</a> which made this task much more achievable.</p>

<p>I was able to build a webservice pretty quickly and test it using <a href="https://github.com/savonrb/savon">savon</a> and fortunately, everything seemed to be working within a day or two.
I was able to use a <a href="http://wsdlbrowser.com">WSDLBrowser</a> to see the webservice I had built and also run a few tests to retrieve data.</p>

<p>For some reason though, the webservice to work against the real EPIC EHR. We found the usual suspects - semantic gaps in what the wsdl expected (capital letters vs small letters), date of birth format(specified in a different string format) etc. Thus, we were fixed them.
While these fixes got us that much closer to completing the integration, we continued to receive generic soap syntax errors.
Then we found deep in the stack a possible reason for these errors.</p>

<h2>Double Enveloped Soap request</h2>

<p>The EPIC WSDL required us to process a soap request that contained two SOAP envelopes instead of one. The EPIC clients seemed to have an issue where they expected double envelopes sent by their requests and our server was unable to process them(given that it was built against standard SOAP). Once we found this issue we were able to patch <a href="https://github.com/glooko/wash_out">our fork of wash_out gem</a> and accommodate these requests.</p>

<p>Once this was resolved, we were able to see and process requests from EPIC and integrate successfully. For those of you who are having issues with EPIC and integrating them with you ruby server feel free to use <a href="https://github.com/glooko/wash_out">our fork of wash_out gem</a>.</p>

<p>(In general, &quot;WashOut is a gem that greatly simplifies creation of SOAP service providers. But if you have a chance, please <a href="http://stopsoap.com/">stopsoap</a>&quot;)</p>

<h2>Result</h2>

<p>With this successful integration, we were able to release this to our users at <a href="http://www.atriushealth.org">Atrius Health</a>. Based on the quality of our work along with our partnership with Dr. Michael Lee from Atrius Health, he had some words of praise for us. <a href="http://campaign.r20.constantcontact.com/render?ca=2a3ac90a-fdd5-4be1-9fc6-c4aef3c5ca25&amp;c=592c8410-604f-11e4-a758-d4ae52754aa9&amp;ch=5992e700-604f-11e4-a758-d4ae52754aa9">MobiHealthNews</a>.</p>

<p>Thank you Amanda Lee from Atrius Health for her patience and support during this integration.</p>


       <!-- disqus comment -->

     <div id="disqus_thread"></div>
     <script type="text/javascript">
         /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
         var disqus_shortname = 'betareleasedraftingrandomthoughts'; // required: replace example with your forum shortname

         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
     </script>
     <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
     <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">

      <li>
        <h3>
          <a href="/2015/02/09/isnt_40mins_too_long/">
            Isn't 40 mins too long for a build?
            <small>09 Feb 2015</small>
          </a>
        </h3>
      </li>

      <li>
        <h3>
          <a href="/2014/10/08/elasticsearch-logs-and-papertrail/">
            Pushing ElasticSearch logs to Papertrail
            <small>08 Oct 2014</small>
          </a>
        </h3>
      </li>

      <li>
        <h3>
          <a href="/2014/06/19/mingle-loves-github/">
            Mingle Loves GitHub
            <small>19 Jun 2014</small>
          </a>
        </h3>
      </li>

  </ul>
</div>

  </div>

  <script type="text/javascript">
  $(".menu-trigger").click(function(){
    $(".sidebar").animate({width: 'toggle'})
  });
  </script>
</body>
</html>
